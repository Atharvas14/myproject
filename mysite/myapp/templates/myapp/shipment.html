{% comment %} 

{% block content %}
  <h1>Shipment List</h1>
  <table>
    <thead>
      <tr>
        <th>Shipment ID</th>
        <th>Address</th>
        <th>Pincode</th>
        <th>Time Slot</th>
      </tr>
    </thead>
    <tbody>
      {% for shipment in shipments %}
        <tr>
          <td>{{ shipment.id }}</td>
          <td>{{ shipment.address }}</td>
          <td>{{ shipment.pincode }}</td>
          <td>{{ shipment.timeslot }}</td>
        </tr>
      {% empty %}
        <tr>
          <td colspan="4">No shipments found.</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
 {% endcomment %}


 {% comment %} {% block content %}
  <h1>Shipment List</h1>
  <table style="border-collapse: collapse; width: 100%;">
    <thead>
      <tr style="border-bottom: 1px solid black;">
        <th style="padding: 8px; text-align: left;">Shipment ID</th>
        <th style="padding: 8px; text-align: left;">Address</th>
        <th style="padding: 8px; text-align: left;">Pincode</th>
        <th style="padding: 8px; text-align: left;">Time Slot</th>
      </tr>
    </thead>
    <tbody>
      {% for shipment in shipments %}
        <tr style="border-bottom: 1px solid black;">
          <td style="padding: 8px;">{{ shipment.id }}</td>
          <td style="padding: 8px;">{{ shipment.address }}</td>
          <td style="padding: 8px;">{{ shipment.pincode }}</td>
          <td style="padding: 8px;">{{ shipment.timeslot }}</td>
        </tr>
      {% empty %}
        <tr>
          <td colspan="4" style="padding: 8px;">No shipments found.</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %} {% endcomment %}

{% comment %} <!DOCTYPE html>
<html>
<head>
<style>
table {
  font-family: arial, sans-serif;
  border-collapse: collapse;
  width: 50%;
}

td, th {
  border: 1px solid #dddddd;
  text-align: left;
  padding: 8px;
}
tr:nth-child(even) {
  background-color: #f39f9f;
}

</style>
</head>
<table>
    <thead>
       <tr>
        
        <th>Pincode &nbsp;</th>
        <th>Timeslot &nbsp;&nbsp;</th>
        <th>Shipments(Max 15)</th>
        <th>Radius</th>
        <th>Trip Score</th>
        <th>Show on map</th>
       </tr>

    </thead>
    <tbody>
        {% for trip in shipments_data %}
        <tr>
            <td> {{trip.pincode}} </td>
            <td> {{trip.timeslot}} </td>
            <td> {{trip.count}} </td>
            <td>{{trip.radius}}</td>
            <td>{{trip.trip_score}}</td>
            <td><a href="{% url 'map' %}">Show Map</a></td>
            
        </tr>
        {% endfor %}
    </tbody>
    
</table> {% endcomment %}

   
<!-- 
            <td> 1</td>
            <td>{{key.0}}</td>
            <td>{{key.1}}&nbsp;&nbsp;</td>
            <td>{{value}}</td>
            {% comment %} <td> {{key.2}} </td> -->



{% comment %} #for new order button {% endcomment %}




<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1,
      shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <style>
    table {
      font-family: arial, sans-serif;
      border-collapse: separate;
      width: 80%;
      margin: 0px;
      padding: 0px;
      /* border: 2px solid red; */
    }

    td,
    th {
      border: 1px solid #dddddd;
      text-align: left;
      padding: 8px;

    }

    .vertical-line {
      border-left: 1px solid black;
      height: 500px;
      /* set the height of the line as needed */
    }



    /* tr:nth-child(even) {
        background-color: #80d89a;
      } */
  </style>
  <title>Shipment</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
    integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI=" crossorigin="" />
  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
    integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM=" crossorigin=""></script>
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

  <style>
    #map {
      height: 400px;
    }
  </style>

</head>

<body>

  <div class="container">
    <div class="row">
      <div class="col-sm-6">
        <div style="height: auto; overflow-x: auto;">
          <div>
            <table>

              <thead>
                <tr>
                  <th>No</th>
                  <th>Pincode</th>
                  <th>Timeslot</th>
                  <th>Shipments(MAX 15)</th>
                  <th>Radius</th>
                  <th>Trip Capacity</th>
                  <th>Quality Score</th>
                  <!-- <th>locations</th> -->
                  <th>Show on map</th> 
                </tr>
              </thead>

              <tbody>
                {% for trip in shipments_data %}
                <tr>
                  <td>{{trip.num}}</td>
                  <td>{{trip.pincode}}</td>
                  <td>{{trip.timeslot}}</td>
                  <td>{{trip.count}}</td>
                  <td>{{trip.radius}}</td>
                  <td>{{trip.trip_capacity}}</td>
                  <td>{{trip.trip_score}}</td>
                  <!-- <td>
                    {% for location in trip.float_list %}
                    {{location}}<br>
                    {% endfor %}
                  </td> -->
                  <td style="text-align: center;">
                    <button class="btn btn-dark active" type="button" onclick="show( locations_{{trip.num}} );">Show</button>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
              <br>
            </table>
          </div>
        </div>
        <!-- pagination code is here -->

        <nav  aria-label="...">
          <ul style="display:flex" class="pagination">
            <span class="font-weight-bold font-italic ml-2 mr-2 mt-1">
              Page {{ shipments_data.number }} of {{ shipments_data.paginator.num_pages }}.
            </span>
            {% if shipments_data.has_previous %}
            <li class="page-item">
              <a class="page-link" href="?page={{shipments_data.previous_page_number}}" tabindex="-1">Previous</a>
            </li>
            {% endif %}
            {% if shipments_data.has_next %}
            <li class="page-item">
              <a class="page-link" href="?page={{shipments_data.next_page_number}}" tabindex="-1">Next</a>
            </li>
             <li class="page-item">
              <a class="page-link" href="?page={{shipments_data.paginator.num_pages}}" tabindex="-1">Last</a>
              
            </li>
            
            {% endif %}
          </ul>
        </nav>

        <!-- pagination code is here -->
      </div>
      <!-- <div class="vertical-line"></div> -->
      <div class="col-sm-6">
        <div style="height: auto">
          <table>
            <thead>
              <tr>
                <th>
                  GOOGLE MAP
                </th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <div id="map" style="height: 800px; width: 600px;">

                  </div>
                </td>
              </tr>
            </tbody>
          </table>
          <div style="text-align: center;">
            <a href="{% url 'new_order' %}"> 
              <button type="submit" class="btn btn-warning m-5" style="background-color: #FFC107; color: white; border: none; padding: 10px 20px; border-radius: 5px; font-size: 16px">New Order</button>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    var map = L.map("map").setView([23.091826, 72.566066], 11);
  
    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      attribution:
        'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>',
      maxZoom: 18,
    }).addTo(map);
   
    var markers = [];
    
    function show(locations) {
    
      for (var i = 0; i < markers.length; i++) {
        map.removeLayer(markers[i]);
      }
      markers = [];
      
      if(locations && locations.length >0){
        for (var i = 0; i < locations.length; i++) {
        var marker = L.marker(locations[i]).addTo(map);
        markers.push(marker);
      }

      }
      
    }
    {% for trip in shipments_data %}
    var locations_{{ trip.num }} = [];
    {% for location in trip.float_list %}
    locations_{{ trip.num }}.push([{{ location.0 }}, {{ location.1 }}]);
    {% endfor %}
    {% endfor %}
   
  </script>

  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>
</html>